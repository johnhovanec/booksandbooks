extends ../layout

block content
	.col-sm-9.mainContent
		table
			thead
				tr: th: th: h3 Featured Titles
			tbody
				tr
					each book, index in books
						if (index > 0 && index % 3 === 0) 
							tr 
						td
							a(href="books/" + book._id)
								img(height='175px' src="/art/" + book.imgPath)
							ul
								li #[span(class='metaField') Title:] #{book.title}
								li #[span(class='metaField') Author:] #{book.authorFName} #{book.authorLName}
								// Need to convert price value to currency format
								li #[span(class='metaField') Price:] #[span(class='metaFieldPrice') $#{book.price/100}]	

		- console.log("@-@ PMin= " + pageMin + " PageMax = " + pageMax + " total  = " + total);
	
		// Display count of items on page and the total number of items; unless at end of items with only one to display
		if pageMax < total
			p Results #{+pageMin + 1}-#{pageMax} of #{total}
		else
			p Results #{+pageMin + 1} of #{total}
		
		//Show Prev button if past first page
		if pageMin > 0
			//a(href="/books/" + (pageMin - itemsPerPage))
			a(href="javascript:void()")
				button.btn.btn-paging(type='button')
					| Prev

		//Show Next button if unless it's the last page
		if !(pageMax >= total)			
			a(href="javascript:void()")
				button.btn.btn-paging(type='button' onclick="onNext()")
					| Next

		hr
		a(href="books/checkout")
			button.btn.btn-primary(type='button')
				i.fa.fa-check
				| Checkout
		hr
	include ../partials/sidebar		

	script.

		// Paging of items on index page, Next button
		//function onNext() {
			//event.preventDefault();
			//$('.itemsTable').remove();  // remove existing records
			//$('#results').remove();

		//console.log("onNext() pageMin= " + pageMin + " PageMax = " + pageMax);
			//- $.ajax({
			//- 	url: '/pageNext/'+pageMax,
			//- 	data: { 'skip' : skip, 'pageMin' : pageMin, 'pageMax' : pageMax, 'total' : total },
			//- 	type: "get",
			//- 	cache: false,
			//- 	success: function (data) {
			//- 		console.log("AJAX in view success");
			//- 		$.each(data.books, function( i, field) {
			//- 			$(".mainTable").append("<tr><td><img height='175' src='/art/"+data.books[i].imgPath + "'<br>"  +  data.books[i].title + "<br>" + data.books[i].authorFName + " " + data.books[i].authorLName + "<br>" + data.books[i].price/100 + "<td></tr>");
			//- 		});
			//- 		//debugger;
			//- 		$('.resultDiv').prepend("<p id='results'> Results " + parseInt(data.pageMin + 1) + "-" + data.pageMax + " of " + data.total + "</p>");
			//- 	},
			//- 	error: function (xhr, ajaxOptions, thrownError) {
			//- 		//$('#lblCommentsNotification').text("Error encountered while saving the comments.");
			//- 		console.log("AJAX in view err");
			//- 	},
			//- });

		//- }

